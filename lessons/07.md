# Lesson 7: File operations

<!--
3.1.Persistence 
3.1.1. Reading and writing data to and from files. 
3.1.2. Saving data to files and loading data from files. 
3.1.3. Common saving formats for logs.

3.2.List comprehension. 
3.2.1. Using lists to enumerate files and entries.
3.2.2. List operations such as search, sort and arithmetic.
-->
In this course we will be using text files which can have multiple uses:
* txt - Plain text file
* log - Common log files for events
* csv - Comma-separated values file uses commas to structure  data in a table format
* html, js, css - HyperText Markup Language file, JavaScript, Cascading Style Sheets (website code)
* json, xml - JavaScript Object Notation, eXtensible Markup Language are simple data formats

## Reading from a text file
The simplest operation is to open a file and read its contents. If you want to open a text file which is in the same directory as your python script (working directory) you just use the file name, else you need a full path. The sample below reads the entire file at one go and stores it in a string:
~~~
f = open('file.txt')
contents = f.read()
print(contents)
f.close()
~~~
While the above script is simple, it is not very useful. The sample below will read (and print) the file line by line:
~~~
f = open('file.txt')
for line in f:
    print(line)
fh.close()
~~~
It is important to close a file after you finish using it. The file might not be found, leading to a crash. This can be avoided by handling it properly as seen below:
~~~
to_open = 'file.txt'
try:
  f = open(to_open)
  for line in f:
      print(line)
  f.close()
except IOError:
  print ("Could not open file:", to_open)
~~~
### Tasks
1. Open a text file and print only the lines that are on an even number, e.g. Lines 1, 3, 5, etc.
1. Open a text file and and count the occurances of every letter of the alphabet (both upper and lower case). Print out a summary at the end E.g.
~~~
A: 31
B: 30
C: 28
D: 14
E: 50
...
~~~

## Opening a files in different modes
The open() function has optional mode parameter that specifies what can be done once the file is opened. Below are the most common:
* 'r' - reading (default)
* 'w' - writing
* 'x' - creating and writing to a new file
* 'a' - appending
* 'r+' - reading and writing to the same file

### Appending to a log file
The most common operation on a log file is to open it, write a new line at the end (append) and close the file as the sample below:
~~~
f = open('file.log', 'a')
f.write('This is my new log file entry')
f.close()
~~~

### Task
Write a script that does the following:
* Ask the user to enter an email address
* Validate the address accoding to the following rules:
  * must be at least 6 characters long
  * contains only one '@' 
  * '@' is not at start or end of address
  * contains at least one '.'
  * '.' are not at start or end of address
  * '@' is before all '.'
  * there is something between '@' and first '.'
* Open a file and append the email address only if it is valid

## References
* https://www.digitalocean.com/community/tutorials/how-to-handle-plain-text-files-in-python-3
